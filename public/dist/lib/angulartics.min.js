/*! outsider 2017-05-30 */
!function(angular,analytics){"use strict";function $analytics(){function bufferedHandler(handlerName){return function(){angulartics.waitForVendorCount&&(cache[handlerName]||(cache[handlerName]=[]),cache[handlerName].push(arguments))}}function updateHandlers(handlerName,fn,options){return handlers[handlerName]||(handlers[handlerName]=[]),handlers[handlerName].push(fn),handlerOptions[fn]=options,function(){if(!this.settings.optOut){var handlerArgs=Array.prototype.slice.apply(arguments);return this.$inject(["$q",angular.bind(this,function($q){return $q.all(handlers[handlerName].map(function(handlerFn){var options=handlerOptions[handlerFn]||{};if(options.async){var deferred=$q.defer(),currentArgs=angular.copy(handlerArgs);return currentArgs.unshift(deferred.resolve),handlerFn.apply(this,currentArgs),deferred.promise}return $q.when(handlerFn.apply(this,handlerArgs))},this))})])}}}function onTimeout(fn,delay){delay?setTimeout(fn,delay):fn()}function register(handlerName,fn,options){if(!settings.developerMode){api[handlerName]=updateHandlers(handlerName,fn,options);var handlerSettings=settings[handlerName],handlerDelay=handlerSettings?handlerSettings.bufferFlushDelay:null,delay=null!==handlerDelay?handlerDelay:settings.bufferFlushDelay;angular.forEach(cache[handlerName],function(args,index){onTimeout(function(){fn.apply(this,args)},index*delay)})}}function capitalize(input){return input.replace(/^./,function(match){return match.toUpperCase()})}function installHandlerRegisterFunction(handlerName){var registerName="register"+capitalize(handlerName);provider[registerName]=function(fn,options){register(handlerName,fn,options)},api[handlerName]=updateHandlers(handlerName,bufferedHandler(handlerName))}function startRegistering(_provider,_knownHandlers,_installHandlerRegisterFunction){angular.forEach(_knownHandlers,_installHandlerRegisterFunction);for(var key in _provider)vm[key]=_provider[key]}var vm=this,settings={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,trackRoutes:!0,trackStates:!0,autoBasePath:!1,basePath:"",excludedRoutes:[]},eventTracking:{},bufferFlushDelay:1e3,trackExceptions:!1,optOut:!1,developerMode:!1},knownHandlers=["pageTrack","eventTrack","exceptionTrack","transactionTrack","setAlias","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce","incrementProperty","userTimings","clearCookies"],cache={},handlers={},handlerOptions={},api={settings:settings};api.setOptOut=function(optOut){this.settings.optOut=optOut,triggerRegister()},api.getOptOut=function(){return this.settings.optOut};var provider={$get:["$injector",function($injector){return apiWithInjector($injector)}],api:api,settings:settings,virtualPageviews:function(value){this.settings.pageTracking.autoTrackVirtualPages=value},trackStates:function(value){this.settings.pageTracking.trackStates=value},trackRoutes:function(value){this.settings.pageTracking.trackRoutes=value},excludeRoutes:function(routes){this.settings.pageTracking.excludedRoutes=routes},firstPageview:function(value){this.settings.pageTracking.autoTrackFirstPage=value},withBase:function(value){this.settings.pageTracking.basePath=value?angular.element(document).find("base").attr("href"):""},withAutoBase:function(value){this.settings.pageTracking.autoBasePath=value},trackExceptions:function(value){this.settings.trackExceptions=value},developerMode:function(value){this.settings.developerMode=value}},apiWithInjector=function(injector){return angular.extend(api,{$inject:injector.invoke})},triggerRegister=function(){startRegistering(provider,knownHandlers,installHandlerRegisterFunction)};startRegistering(provider,knownHandlers,installHandlerRegisterFunction)}function $analyticsRun($rootScope,$window,$analytics,$injector){function matchesExcludedRoute(url){for(var i=0;i<$analytics.settings.pageTracking.excludedRoutes.length;i++){var excludedRoute=$analytics.settings.pageTracking.excludedRoutes[i];if(excludedRoute instanceof RegExp&&excludedRoute.test(url)||url.indexOf(excludedRoute)>-1)return!0}return!1}function pageTrack(url,$location){matchesExcludedRoute(url)||$analytics.pageTrack(url,$location)}$analytics.settings.pageTracking.autoTrackFirstPage&&$injector.invoke(["$location",function($location){var noRoutesOrStates=!0;if($injector.has("$route")){var $route=$injector.get("$route");if($route)for(var route in $route.routes){noRoutesOrStates=!1;break}else null===$route&&(noRoutesOrStates=!1)}else if($injector.has("$state")){var $state=$injector.get("$state");for(var state in $state.get()){noRoutesOrStates=!1;break}}if(noRoutesOrStates)if($analytics.settings.pageTracking.autoBasePath&&($analytics.settings.pageTracking.basePath=$window.location.pathname),$analytics.settings.pageTracking.trackRelativePath){var url=$analytics.settings.pageTracking.basePath+$location.url();pageTrack(url,$location)}else pageTrack($location.absUrl(),$location)}]),$analytics.settings.pageTracking.autoTrackVirtualPages&&$injector.invoke(["$location",function($location){$analytics.settings.pageTracking.autoBasePath&&($analytics.settings.pageTracking.basePath=$window.location.pathname+"#");var noRoutesOrStates=!0;if($analytics.settings.pageTracking.trackRoutes&&$injector.has("$route")){var $route=$injector.get("$route");if($route)for(var route in $route.routes){noRoutesOrStates=!1;break}else null===$route&&(noRoutesOrStates=!1);$rootScope.$on("$routeChangeSuccess",function(event,current){if(!current||!(current.$$route||current).redirectTo){var url=$analytics.settings.pageTracking.basePath+$location.url();pageTrack(url,$location)}})}$analytics.settings.pageTracking.trackStates&&($injector.has("$state")&&!$injector.has("$transitions")&&(noRoutesOrStates=!1,$rootScope.$on("$stateChangeSuccess",function(event,current){var url=$analytics.settings.pageTracking.basePath+$location.url();pageTrack(url,$location)})),$injector.has("$state")&&$injector.has("$transitions")&&(noRoutesOrStates=!1,$injector.invoke(["$transitions",function($transitions){$transitions.onSuccess({},function($transition$){var transitionOptions=$transition$.options();if(transitionOptions.notify){var url=$analytics.settings.pageTracking.basePath+$location.url();pageTrack(url,$location)}})}]))),noRoutesOrStates&&$rootScope.$on("$locationChangeSuccess",function(event,current){if(!current||!(current.$$route||current).redirectTo)if($analytics.settings.pageTracking.trackRelativePath){var url=$analytics.settings.pageTracking.basePath+$location.url();pageTrack(url,$location)}else pageTrack($location.absUrl(),$location)})}]),$analytics.settings.developerMode&&angular.forEach($analytics,function(attr,name){"function"==typeof attr&&($analytics[name]=function(){})})}function analyticsOn($analytics){return{restrict:"A",link:function($scope,$element,$attrs){var eventType=$attrs.analyticsOn||"click",trackingData={};angular.forEach($attrs.$attr,function(attr,name){isProperty(name)&&(trackingData[propertyName(name)]=$attrs[name],$attrs.$observe(name,function(value){trackingData[propertyName(name)]=value}))}),angular.element($element[0]).bind(eventType,function($event){var eventName=$attrs.analyticsEvent||inferEventName($element[0]);trackingData.eventType=$event.type,$attrs.analyticsIf&&!$scope.$eval($attrs.analyticsIf)||($attrs.analyticsProperties&&angular.extend(trackingData,$scope.$eval($attrs.analyticsProperties)),$analytics.eventTrack(eventName,trackingData))})}}}function exceptionTrack($provide){$provide.decorator("$exceptionHandler",["$delegate","$injector",function($delegate,$injector){return function(error,cause){var result=$delegate(error,cause),$analytics=$injector.get("$analytics");return $analytics.settings.trackExceptions&&$analytics.exceptionTrack(error,cause),result}}])}function isCommand(element){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(element.tagName.toLowerCase()+":"+(element.type||""))>=0}function inferEventName(element){return isCommand(element)?element.innerText||element.value:element.id||element.name||element.tagName}function isProperty(name){return"analytics"===name.substr(0,9)&&["On","Event","If","Properties","EventType"].indexOf(name.substr(9))===-1}function propertyName(name){var s=name.slice(9);return"undefined"!=typeof s&&null!==s&&s.length>0?s.substring(0,1).toLowerCase()+s.substring(1):s}var angulartics=window.angulartics||(window.angulartics={});angulartics.waitForVendorCount=0,angulartics.waitForVendorApi=function(objectName,delay,containsField,registerFn,onTimeout){onTimeout||angulartics.waitForVendorCount++,registerFn||(registerFn=containsField,containsField=void 0),!Object.prototype.hasOwnProperty.call(window,objectName)||void 0!==containsField&&void 0===window[objectName][containsField]?setTimeout(function(){angulartics.waitForVendorApi(objectName,delay,containsField,registerFn,!0)},delay):(angulartics.waitForVendorCount--,registerFn(window[objectName]))},angular.module("angulartics",[]).provider("$analytics",$analytics).run(["$rootScope","$window","$analytics","$injector",$analyticsRun]).directive("analyticsOn",["$analytics",analyticsOn]).config(["$provide",exceptionTrack])}(angular);