/*! outsider 2016-04-02 */
angular.module("Routes",["ngRoute"]).config(function(a,b){a.when("/",{templateUrl:"views/pages/home.html"}).when("/login",{templateUrl:"views/pages/auth/login.html",controller:"mainController",controllerAs:"login"}).when("/signup",{templateUrl:"views/pages/auth/signup.html",controller:"userController",controllerAs:"signup"}).when("/forgot",{templateUrl:"views/pages/auth/forgot.html",controller:"userController",controllerAs:"forgot"}).when("/reset/:token",{templateUrl:"views/pages/auth/reset.html",controller:"userController",controllerAs:"reset"}).when("/profile",{templateUrl:"views/pages/profile.html",controller:"profileController",controllerAs:"profile"}).when("/verify/:token",{templateUrl:"views/pages/auth/verify.html",controller:"userController",controllerAs:"verify"}).when("/news",{templateUrl:"views/pages/news.html",controller:"newsController",controllerAs:"news"}).when("/articles/:slug",{templateUrl:"views/pages/article.html",controller:"articleController",controllerAs:"article"}).when("/admin",{templateUrl:"views/pages/admin/index.html",controller:"adminController",controllerAs:"admin",access:{requiredPermission:["Admin"]}}).when("/admin/articles",{templateUrl:"views/pages/admin/articles/index.html",controller:"adminArticleController",controllerAs:"articles",access:{requiredPermission:["Admin"]},resolve:{action:function(){return"index"}}}).when("/admin/articles/create",{templateUrl:"views/pages/admin/articles/create.html",controller:"adminArticleController",controllerAs:"articles",access:{requiredPermission:["Admin","Writer"]},resolve:{action:function(){return"create"}}}).when("/admin/articles/edit/:id",{templateUrl:"views/pages/admin/articles/create.html",controller:"adminArticleController",controllerAs:"articles",access:{requiredPermission:["Admin","Writer"]},resolve:{action:function(){return"edit"}}}).when("/401",{templateUrl:"views/pages/errors/401.html"}).when("/403",{templateUrl:"views/pages/errors/403.html"}).when("/500",{templateUrl:"views/pages/errors/500.html"}).when("/404",{templateUrl:"views/pages/errors/404.html"}).otherwise({redirectTo:"/404"}),b.html5Mode(!0)}).run(function(a,b,c){a.$on("$routeChangeStart",function(a,d,e){!c.get()||"views/pages/login.html"!==d.templateUrl&&"views/pages/signup.html"!==d.templateUrl&&"views/pages/forgot.html"!==d.templateUrl||b.path("/")})}).run(function(a,b,c,d){a.$on("$routeChangeStart",function(a,d,e){c.pullUser().then(function(a){c.setUser(a.data);var e=c.getUser().role;if(e&&d.access)for(var f=d.access.requiredPermission,g=0;g<f.length;g++)-1===e.toString().indexOf(f[g])&&b.path("/403")})["catch"](function(){d.access&&b.path("/login")})})});