/*! outsider 2017-05-30 */
"use strict";angular.module("toasty",[]),angular.module("toasty").directive("toasty",["toasty","$timeout","$sce",function(toasty,$timeout,$sce){return{replace:!0,restrict:"EA",scope:!0,link:function(scope,element,attrs){function clear(id){id?angular.forEach(scope.toasty,function(value,key){value.id==id&&(scope.$broadcast("toasty-cleared",scope.toasty[key]),value.onRemove&&angular.isFunction(value.onRemove)&&value.onRemove.call(scope.toasty[key]),scope.toasty.splice(key,1),scope.$$phase||scope.$digest())}):(angular.forEach(scope.toasty,function(value,key){value.onRemove&&angular.isFunction(value.onRemove)&&value.onRemove.call(scope.toasty[key])}),scope.toasty=[],scope.$broadcast("toasty-cleared"))}function setTimeout(toasty,time){toasty.timeout=$timeout(function(){clear(toasty.id)},time)}function checkConfigItem(config,options,property){return 0!=options[property]&&(!!options[property]||config[property])}function add(config,options){uniqueCounter++;var theme,showClose=checkConfigItem(config,options,"showClose"),clickToClose=checkConfigItem(config,options,"clickToClose"),html=checkConfigItem(config,options,"html"),shake=checkConfigItem(config,options,"shake"),sticky=checkConfigItem(config,options,"sticky");theme=options.theme&&themes.indexOf(options.theme)>-1?options.theme:config.theme,scope.toasty.length>=config.limit&&scope.toasty.shift();var toast={id:uniqueCounter,title:html?$sce.trustAsHtml(options.title):options.title,msg:html?$sce.trustAsHtml(options.msg):options.msg,showClose:showClose,clickToClose:clickToClose,shake:shake?"toasty-shake":"",html:html,type:"toasty-type-"+options.type,theme:"toasty-theme-"+theme,sticky:sticky,onAdd:options.onAdd&&angular.isFunction(options.onAdd)?options.onAdd:null,onRemove:options.onRemove&&angular.isFunction(options.onRemove)?options.onRemove:null,onClick:options.onClick&&angular.isFunction(options.onClick)?options.onClick:null};scope.toasty.push(toast),options.onAdd&&angular.isFunction(options.onAdd)&&options.onAdd.call(toast),scope.$broadcast("toasty-added",toast),0!=options.timeout&&(options.timeout||config.timeout)&&setTimeout(scope.toasty[scope.toasty.length-1],options.timeout||config.timeout)}var uniqueCounter=0,themes=["bootstrap"];scope.position="",scope.toasty=[],scope.$on("toasty-new",function(event,data){var config=data.config,options=data.options;scope.position||(scope.position="toasty-position-"+config.position),add(config,options)}),scope.$on("toasty-clear",function(event,data){clear(data.id)}),scope.$on("toasty-close-all",function(event,data){for(var i=scope.toasty.length-1;i>=0;i--)scope.toasty[i].sticky===!1&&scope.toasty.splice(i,1)}),scope.close=function(id){clear(id)},scope.clickToasty=function(toast){scope.$broadcast("toasty-clicked",toast),toast.onClick&&angular.isFunction(toast.onClick)&&toast.onClick.call(toast),toast.clickToClose&&clear(toast.id)}},template:'<div id="toasty" ng-class="[position]"><div class="toast" ng-repeat="toast in toasty" ng-class="[toast.type, toast.interact, toast.shake, toast.theme]" ng-click="clickToasty(toast)"><div ng-click="close(toast.id)" class="close-button" ng-if="toast.showClose"></div><div ng-if="toast.title || toast.msg" class="toast-text"><span class="toast-title" ng-if="!toast.html && toast.title" ng-bind="toast.title"></span><span class="toast-title" ng-if="toast.html && toast.title" ng-bind-html="toast.title"></span><br ng-if="toast.title && toast.msg" /><span class="toast-msg" ng-if="!toast.html && toast.msg" ng-bind="toast.msg"></span><span class="toast-msg" ng-if="toast.html && toast.msg" ng-bind-html="toast.msg"></span></div></div></div>'}}]),angular.module("toasty").provider("toastyConfig",function(){var object={limit:5,showClose:!0,clickToClose:!0,position:"top-right",timeout:2e4,html:!1,shake:!1,theme:"bootstrap",sticky:!1},updated={};return{setConfig:function(override){updated=override},$get:function(){return{config:angular.extend(object,updated)}}}}),angular.module("toasty").factory("toasty",["$rootScope","toastyConfig",function($rootScope,toastyConfig){var config=toastyConfig.config,toasty=function(options,type){(angular.isString(options)&&""!=options||angular.isNumber(options))&&(options={title:options.toString()}),options&&(options.title||options.msg)?(options.type=type||"default",$rootScope.$broadcast("toasty-new",{config:config,options:options})):console.error("angular-toasty: No toast title or message specified!")},handleArray=function(options){for(var multiErrorString="",i=0;i<options.msg.length;i++)multiErrorString+="<li>"+options.msg[i].message+"</li>";options.msg=multiErrorString,config.html=!0};return toasty["default"]=function(options){Array.isArray(options.msg)?handleArray(options):options.msg=options.msg,toasty(options)},toasty.info=function(options){Array.isArray(options.msg)?handleArray(options):options.msg=options.msg,toasty(options,"info")},toasty.wait=function(options){Array.isArray(options.msg)?handleArray(options):options.msg=options.msg,toasty(options,"wait")},toasty.success=function(options){Array.isArray(options.msg)?handleArray(options):(console.log(options.msg),options.msg=options.msg),toasty(options,"success")},toasty.error=function(options){Array.isArray(options.msg)?handleArray(options):options.msg=options.msg.message,toasty(options,"error")},toasty.warning=function(options){Array.isArray(options.msg)?handleArray(options):options.msg=options.msg,toasty(options,"warning")},toasty.clear=function(id){$rootScope.$broadcast("toasty-clear",{id:id})},toasty.closeAll=function(){$rootScope.$broadcast("toasty-close-all")},toasty.getGlobalConfig=function(){return config},toasty}]);