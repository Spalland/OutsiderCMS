/*! outsider 2017-05-30 */
!function(){"use strict";var module=angular.module("modalService",[]);module.factory("Modal",["$animate","$document","$compile","$controller","$http","$rootScope","$q","$templateRequest","$timeout",function($animate,$document,$compile,$controller,$http,$rootScope,$q,$templateRequest,$timeout){function ModalService(){var self=this,getTemplate=function(template,templateUrl){var deferred=$q.defer();return template?deferred.resolve(template):templateUrl?$templateRequest(templateUrl,!0).then(function(template){deferred.resolve(template)},function(error){deferred.reject(error)}):deferred.reject("No template or templateUrl has been specified."),deferred.promise},appendChild=function(parent,child){var children=parent.children();return children.length>0?$animate.enter(child,parent,children[children.length-1]):$animate.enter(child,parent)};self.showModal=function(options){var deferred=$q.defer(),controllerName=options.controller;return controllerName?(getTemplate(options.template,options.templateUrl).then(function(template){var modalScope=(options.scope||$rootScope).$new(),closeDeferred=$q.defer(),closedDeferred=$q.defer(),inputs={$scope:modalScope,close:function(result,delay){void 0!==delay&&null!==delay||(delay=0),$timeout(function(){closeDeferred.resolve(result),$animate.leave(modalElement).then(function(){closedDeferred.resolve(result),modalScope.$destroy(),inputs.close=null,deferred=null,closeDeferred=null,modal=null,inputs=null,modalElement=null,modalScope=null})},delay)}};options.inputs&&angular.extend(inputs,options.inputs);var linkFn=$compile(template),modalElement=linkFn(modalScope);inputs.$element=modalElement;var controllerObjBefore=modalScope[options.controllerAs],modalController=$controller(options.controller,inputs,!1,options.controllerAs);options.controllerAs&&controllerObjBefore&&angular.extend(modalController,controllerObjBefore),options.appendElement?appendChild(options.appendElement,modalElement):appendChild(body,modalElement);var modal={controller:modalController,scope:modalScope,element:modalElement,close:closeDeferred.promise,closed:closedDeferred.promise};deferred.resolve(modal)}).then(null,function(error){deferred.reject(error)}),deferred.promise):(deferred.reject("No controller has been specified."),deferred.promise)}}var body=$document.find("body");return new ModalService}])}();